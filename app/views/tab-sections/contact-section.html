{% from "table/macro.njk"     import govukTable %}
{% from "button/macro.njk"    import govukButton %}

{% from "includes/tab-title.html"               import tabTitle %}


{% macro contactSection(data) %}

    {% if data.hasLocations %}
    
        {{ tabTitle({
                title:      'Addresses',
                controls:   '<a href="/product/edit">Add address</a>'
        }) }}


        {% if data.locations %}

            {% set locationRows = [] %}

            {% for location in data.locations %}

              {% set locationRows = ( locationRows.push([
                {text: location.title},
                {text: location.street},
                {text: location.city},
                {text: location.postcode}
              ]), locationRows ) %}

            {% endfor %}
          
            <div class="govuk-grid-row">
              <div class="govuk-grid-column-full">
                {{ govukTable({
                  firstCellIsHeader: true,
                  rows: locationRows
                }) }}
              </div>
            </div>

        {% endif %}
        
        <hr class="govuk-section-break govuk-section-break--l" />

    {% endif %}


    {% if data.hasContacts %}

        {{ tabTitle({
                title:      'Contacts',
                controls:   '<a href="/product/edit">Add contact</a>'
        }) }}

        {% if data.contacts %}


            {% set contactRows = [] %}

            {% for contact in data.contacts %}

              {% set contactRows = ( contactRows.push([
                {text: contact.role},
                {text: contact.name},
                {text: contact.phone},
                {text: contact.email}
              ]), contactRows ) %}

            {% endfor %}


            <div class="govuk-grid-row">
              <div class="govuk-grid-column-full">
                {{ govukTable({
                  firstCellIsHeader: true,
                  rows: contactRows
                }) }}
              </div>
            </div>


        {% endif %}

    {% endif %}



{% endmacro %}