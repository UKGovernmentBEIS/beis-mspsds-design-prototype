{% from "includes/components/shared/tab-title.html"           import tabTitle %}
{% from "table/macro.njk"                                     import govukTable %}



{% if not addContactLink  %}
    {% set addContactLink = '#' %}
{% endif %}

{% if not contacts  %}
    {% set contacts = [] %}
{% endif %}

{% if not currentContacts  %}
    {% set currentContacts = [] %}
{% endif %}




{{ tabTitle({
        title:      'Contacts',
        controls:   '<a href="'+addContactLink+'" class="mspsds-block-link">Add contact</a>'
}) }}




<div class="mspsds-tablist mspsds-tablist--contact">
    

    {% for contact in contacts %}

      
      {% set matched = false %}

      {% for ciz in currentContacts %}
          {% if contact.id === ciz.id %}
              {% set matched = ciz.role %}
          {% endif %}
      {% endfor %}



      {% if matched %}

        {% set contactRows = [] %}

        {% set contactRows = ( contactRows.push([
          {text: matched},
          {html: contact.name + '<br/>' + contact.title},
          {html: contact.phone + '<br/>' + contact.email}
        ]), contactRows ) %}

        <div class="govuk-grid-row">
          <div class="govuk-grid-column-full">

            {{ govukTable({
              firstCellIsHeader: true,
              rows: contactRows
            }) }}

            <div class="mspsds-controls">
              <a href="/pages/flows/manage-contact/01" class="mspsds-block-link">Manage contact</a>
            </div>

          </div>
        </div>

      {% endif %}


    {% endfor %}



    


</div>









