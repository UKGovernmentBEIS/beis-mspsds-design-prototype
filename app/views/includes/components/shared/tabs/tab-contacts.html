{% from "includes/components/shared/tab-title.html"           import tabTitle %}
{% from "table/macro.njk"                                     import govukTable %}


{% if not addLink  %}
    {% set addLink = '#' %}
{% endif %}

{% if not currentContacts  %}
    {% set currentContacts = [] %}
{% endif %}


{{ tabTitle({
        title:      'Contacts',
        controls:   '<a href="'+addLink+'" class="mspsds-block-link">Add contact</a>'
}) }}


<div class="mspsds-tablist mspsds-tablist--contact">
    
  {% for contact in currentContacts %}
    {% set contactRows = [] %}

    {% set contactRows = ( contactRows.push([
      {text: contact.role},
      {html: contact.name + '<br/>' + contact.title},
      {html: contact.phone + '<br/>' + contact.email}
    ]), contactRows ) %}

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">

        {{ govukTable({
          firstCellIsHeader: true,
          rows: contactRows
        }) }}

        <div class="mspsds-controls">
          <a href="/root/flows/contact/manage/01?contact={{contact.id}}" class="mspsds-block-link">Manage contact</a>
        </div>

      </div>
    </div>

  {% endfor %}

</div>









