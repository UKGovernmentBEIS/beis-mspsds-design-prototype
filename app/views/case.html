{% extends "mspsds-layout.html" %}

{% block pageTitle %}
  Case Page
{% endblock %}

{% block beforeContent %}

  {{ govukPhaseBanner({
    tag: {
      text: "beta"
    },
    html: 'This is a new service – your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}

  {{ govukBackLink({
    text: "Back to Case & Questions",
    href: "/case-list"
  }) }}

{% endblock %}


{% block content %}

{% from "includes/case-status.html" import caseStatus %}

{% from "includes/mspsds-confirmation.html" import confirmation %}

{{ confirmation("confirmation--image-deleted", "Image \"Image title\" deleted.", "Undo") }}
{{ confirmation("confirmation--product-removed", "Product \"Product title\" removed from this case.", "Undo") }}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">
    {{ pageTitle({
      type:       "Case: 1810-0001",
      title:      "Charge Worx, Travel plug adaptor –Electric shock, fire hazard"
    }) }}
  </div>

  <div class="govuk-grid-column-one-third">
    {{ caseStatus("Open","Nick Golding","High") }}
  </div>

</div>



{% from "panels/case-why.html" import caseWhy %}
{{ caseWhy({
  hazardType: "Electric shock, fire",
  hazardTo:   "Young children",
  hazardDescription: "Travel adaptor available from high-street store Game has been reported to have caused a fire and severe electric shocks. Has been reported more than 10 times in the last 2 months.",
  riskLevel: "Serious"
}) }}

{% include "panels/product-panel.html" %}



<h2 class="govuk-heading-l">Add new activity</h2>
{% include "panels/record-action.html" %}

<hr class="govuk-section-break govuk-section-break--m" />

{{ govukTabs({
  items: [
    {
      label: "Activity",
      id: "activity",
      panel: {
        html: activityHtml
      }
    },
    {
      label: "Contacts",
      id: "contacts",
      panel: {
        html: contactsHtml
      }
    },
    {
      label: "Attachments",
      id: "attachments",
      panel: {
        html: attachmentsHtml
      }
    },
    {
      label: "Products",
      id: "products",
      panel: {
        html: productsHtml
      }
    },
    {
      label: "Businesses",
      id: "businesses",
      panel: {
        html: businessesHtml
      }
    },
    {
      label: "Related",
      id: "related",
      panel: {
        html: relatedItemsHtml
      }
    },
    {
      label: "Full detail",
      id: "full-detail",
      panel: {
        html: fullDetailHtml
      }
    }
  ]
}) }}

{% endblock %}

{% set activityHtml %}
{% include "tab-sections/activity.html" %}

{% endset -%}

{% set contactsHtml %}
<h2 class="govuk-heading-l">Contacts</h2>

{% from "panels/contact-panel.html" import contactPanel %}

<div class="govuk-grid-row">
  {{ contactPanel("Main contact", "Paul Jones", "020 7123 12345", "paul.jones@abc.np") }}
  {{ contactPanel("Head of Procurement", "Gemma Wilkinson", "", "gemma.wilkinson@abc.np") }}
  {{ contactPanel("Another contact", "Paul Jones", "020 7123 12345", "paul.jones@abc.np") }}
  {{ contactPanel("And another", "Gemma Wilkinson", "", "gemma.wilkinson@abc.np") }}
</div>

{% endset -%}

{% set attachmentsHtml %}
{% include "tab-sections/attachments.html" %}

{% endset -%}

{% set productsHtml %}
{% include "tab-sections/products-list.html" %}

{% endset -%}

{% set businessesHtml %}
{% include "tab-sections/businesses-list.html" %}

{% endset -%}

{% set relatedItemsHtml %}
<h2 class="govuk-heading-l">Linked to this case</h2>

{% include "includes/linked-items.html" %}

<h2 class="govuk-heading-l">Potentially related to this case</h2>

{% include "includes/potential-relationships.html" %}

{% endset -%}

{% set fullDetailHtml %}
{% include "tab-sections/full-detail-case.html" %}

{% endset -%}
