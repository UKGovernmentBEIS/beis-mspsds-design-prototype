
{% extends "mspsds-layout.html" %}


{% from "select/macro.njk"                import govukSelect %}

{% set bodyClasses = "mspsds-width-container case-list-3" %}



{% block pageTitle %}
  Search results: Cases
{% endblock %}



{% block beforeContent %}

  {{ govukPhaseBanner({
    tag: {
      text: "beta"
    },
    html: 'This is a new service – your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}

  {{ govukBackLink({
    text: "Back to Cases",
    href: "./case-list"
  }) }}

{% endblock %}





{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {{ pageTitle({
        type:       "Case search results",
        title:      data['q']
      }) }}
    </div>
  </div>


    <div class="govuk-grid-row">

    
    <div class="govuk-grid-column-one-quarter govuk-!-margin-bottom-2 mspsds-case-control mspsds-case-filter-controls">


      <div class="govuk-!-margin-bottom-0">
          {{ headerSearch({
            action:"search-results__cases-opt3.html",
            label: "Keywords",
            value: ""
          }) }}
      </div>


      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">


      
      <form id="case-filters">

          {% set assigneeHtml %}
          <label for="case-assignee-autocomplete" class="label govuk-label">Name / Team
            <div id="case-assignee-autocomplete-container"></div>
          </label>
        {% endset -%}



        {{ govukCheckboxes({

          fieldset: {
            legend: {
              text: "Assigned to",
              isPageHeading: false,
              classes: "govuk-fieldset__legend--s"
            }
          },
          classes: "govuk-!-margin-bottom-5",
          idPrefix:   "Assignee",
          name:       "Assignee",
          items: [
            {
              value: "me",
              text: "Me",
              checked: checked("Assignee", "me")
            },
            {
              value: "other",
              text: "Someone else",
              checked: checked("Assignee", "other"),
              conditional: {
                html: assigneeHtml
              }
            }

          ]
        }) }}


        {{ govukCheckboxes({

          fieldset: {
            legend: {
              text: "Status",
              isPageHeading: false,
              classes: "govuk-fieldset__legend--s"
            }
          },
          classes: "govuk-!-margin-bottom-5",
          idPrefix: "Status",
          name: "Status",
          items: [
            {
              value: "Open",
              text: "Open",
              checked: checked("Status", "Open")
            },
            {
              value: "Closed",
              text: "Closed",
              checked: checked("Status", "Closed")
            }
          ]
        }) }}



        {{ govukRadios({

          fieldset: {
            legend: {
              text: "Sort by",
              isPageHeading: false,
              classes: "govuk-fieldset__legend--s"
            }
          },
          classes: "govuk-!-margin-bottom-5",
          idPrefix:   "Sort",
          name:       "Sort",
          items: [
            {
              value: "newest",
              text: "Newest",
              checked: checked("Sort", "newest")
            },
            {
              value: "latest",
              text: "Updated – recent",
              checked: checked("Sort", "latest")
            },
            {
              value: "oldest",
              text: "Updated – oldest",
              checked: checked("Sort", "oldest")
            }

          ]
        }) }}
          

        {{ govukButton({
          text: "Apply filters"
        }) }}


    </form>

    <script type="text/javascript">


      var assignees = [
        'Anyone',
        'Tim Harwood',
        'Nick Golding',
        'Ed Smith-Muller',
        'Amanda Farrell',
        'Adebola Showemimo'
      ];

      element = document.querySelector('#case-assignee-autocomplete-container');
      id = 'case-assignee-autocomplete';
      accessibleAutocomplete({
        element: element,
        id: id,
        name: id,
        showNoOptionsFound: false,
        defaultValue: '{{someoneElse}}',
        showAllValues: true, 
        dropdownArrow: () => '',
        source: assignees
      });
    </script>

      


    </div>

    <div class="govuk-grid-column-three-quarters mspsds-search__results">
     {{ caseCard({
        type:   'Case',
        status: 'Open',
        id:     '0132-1421',

        product:  'Charge Worx, Travel plug adaptor',
        hazard:   'Electric shock, fire hazard',

        match:  {
          key:  'Case reference',
          value: "01<span class='highlight'>32-142</span>1"
        }

    }) }}

    {{ caseCard({
        type:   'Case',
        status: 'Open',
        id:     '1534-1287',

        product:  'I-Sonite, Armband Phone Case',
        hazard:   'Choking hazard',

        match:  {
          key:  'Assignee',
          value: "<span class='highlight'>Nick</span> Golding – <span class='highlight'>nick</span>.golding@softwire.com"
        }

    }) }}

    {{ caseCard({
        type:   'Case',
        status: 'Open',
        id:     '1809-1234',

        product:  'Makita, drill',
        hazard:   'Electric shock, fire hazard',

        match:  {
          key:  'Product, model number',
          value: "Makita Pen, 1/4 x 18 mm, Stainless Steel, F <span class='highlight'>32142</span>"
        }

    }) }}

    {{ caseCard({
        type:   'Case',
        status: 'Open',
        id:     '1806-1212',

        product:  'Kingfisher Technology, Cable Lead Adaptor',
        hazard:   'Electric shock hazard',

        match:  {
          key:  'Product, manufacturer reference',
          value: "<span class='highlight'>32142</span>-USB-UCE6-90-BLA-D"
        }

    }) }}
    </div>
  </div




{% endblock %}
