{% extends "mspsds-layout.html" %}

{% block pageTitle %}
  Process an incoming report
{% endblock %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "beta"
    },
    html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}

  {{ govukBackLink({
    text: "Back to list",
    href: "/case-list"
  }) }}
{% endblock %}

{% block content %}
{{ pageTitle({
  type:   "Report ref. 1810-0001",
  title:  "Enquiry details"
}) }}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <form action="./email-check-endpoint" method="post" class="form">

      {% call govukFieldset({
        legend: {
          text:           "Summary",
          isPageHeading:  false,
          classes:        "govuk-fieldset__legend--l"
        }
      }) %}
        {{ govukInput({
          hint : {
            text: "This will be used as the issue title, and to display in lists etc."
          },
          classes: "govuk-!-width-two-thirds",
          id:   "question-summary",
          name: "new[title]"
        }) }}
      {% endcall %}

      {% call govukFieldset({
        legend: {
          text:           "Enquiry in full",
          isPageHeading:  false,
          classes:        "govuk-fieldset__legend--l"
        }
      }) %}
        {{ govukTextarea({
          name: "new[description]",
          id:   "question-other-detail"
        }) }}
      {% endcall %}

      {{ govukButton({
        text: "Continue"
      }) }}

    </form>
  </div>

  <div class="govuk-grid-column-one-third">
    {% from "./includes/step-flow-map.html" import stepFlowMap %}
    {% set isEmail = (data.new["origin-type"]=="Email") %}
    {{ stepFlowMap(data.new["issue-type"], isEmail, 2) }}
  </div>
</div>

{% endblock %}
