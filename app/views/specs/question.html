{% extends "mspsds-layout.html" %}

{% block pageTitle %}
  Question Page
{% endblock %}


{% block beforeContent %}

  {{ govukPhaseBanner({
    tag: {
      text: "beta"
    },
    html: 'This is a new service – your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}

  {{ govukBackLink({
    text: "Back to Case & Questions",
    href: "/case-list"
  }) }}

{% endblock %}




{% block content %}


<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    {{ pageTitle({
      type:       "Question: 1810-0002",
      title:      "What legislation applies to this travel adaptor?",
      subTitle:   "Created by Tim Harwood, 10/10/2018"
    }) }}
  </div>
  <div class="govuk-grid-column-one-third">
    {% from "includes/case-status.html" import caseStatus %}
    {{ caseStatus("Open", "Tim Harwood", "Not set") }}
  </div>
</div>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-third">
    <h2 class="govuk-heading-m">
      <span class="govuk-caption-m">Asked by:</span>
      Jenny Patterson
    </h2>
  </div>
  <div class="govuk-grid-column-two-thirds">
    <p class="govuk-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua?</p>
    <p class="govuk-body">Aliqua???</p>
  </div>
</div>


<div class="govuk-grid-row ">
  <div class="govuk-grid-column-full mspsds-overview"">
    <h2 class="govuk-heading-m" title="Could also be a business, or...?">Product</h2>
    {% include "panels/product-panel.html" %}
  </div>
</div>


<hr class="govuk-section-break govuk-section-break--m" />

{{ govukTabs({
  items: [
    {
      label: "Activity",
      id:    "activity",
      panel: {
        html: activityHtml
      }
    },
    {
      label: "Full details",
      id:    "full-details",
      panel: {
        html: fullDetailHtml
      }
    },
    {
      label: "Products",
      id: "products",
      panel: {
        html: productsHtml
      }
    },
    {
      label: "Businesses",
      id: "businesses",
      panel: {
        html: businessesHtml
      }
    },
    {
      label: "Contacts",
      id: "contacts",
      panel: {
        html: contactsHtml
      }
    },
    {
      label: "Attachments",
      id: "attachments",
      panel: {
        html: attachmentsHtml
      }
    },
    {
      label: "Related",
      id: "related",
      panel: {
        html: relatedItemsHtml
      }
    }
  ]
}) }}

{% endblock %}





{% set activityHtml %}
  {% from "includes/activity-timeline.html"       import activityTimeline %}
  {% from "includes/tab-title.html"               import tabTitle %}


  {{ tabTitle({
        title:      'Activity'
  }) }}

  {{ activityTimeline([
    {
      action: "Comment added",
      html: "I've done some research into <a href='#'>this legislation</a> but it doesn't seem to apply here."
    },
    {
      action: "Product added: Travel plug adaptor — Charge Worx 931L",
      html: '
        <p>Role: <span class="govuk-!-font-weight-bold">Distributor</span></p>
        <details class="govuk-details">
          <summary class="govuk-details__summary">
            <span class="govuk-details__summary-text">
              Product details
            </span>
          </summary>
          <div class="govuk-details__text govuk-body-s">
            Brand: Charge Worx<br />
            Model Name: International Travel Adaptor<br />
            Model number: 931L<br />
            Description: Universal travel USB plug adaptor with surge protector
          </div>
        </details>'
    },
    {
      action: "Question created"
    }
  ]) }}

{% endset -%}




{% set contactsHtml %}

  {% from "tab-sections/contact-section.html" import contactSection %}

  {{ contactSection({
    hasContacts: true,
    contacts: [
      {
        role:     'Main contact',
        name:     'Paul Jones',
        phone:    '0207 1234 5678',
        email:    'paul.jones@abc.np'
      },
      {
        role:     'Head of Procurement',
        name:     'Gemma Wilkinson',
        phone:    '',
        email:    'gemma.wilkinson@abc.np'
      }
    ]
  }) }}

{% endset -%}




{% set attachmentsHtml %}
  {% from "includes/attachment-list.html"         import attachmentList %}
  {% from "includes/tab-title.html"               import tabTitle %}

  {{ tabTitle({
        title:      'Attachments',
        controls:   '<a href="#" class="mspsds-block-link">Add new image</a> <a href="#" class="mspsds-block-link">Add new document</a>'
  }) }}

  {{ attachmentList(5) }}

{% endset -%}





{% set productsHtml %}
  {% include "tab-sections/products-list.html" %}
{% endset -%}






{% set businessesHtml %}
  {% include "tab-sections/businesses-list.html" %}
{% endset -%}






{% set relatedItemsHtml %}
  {% from "includes/tab-title.html"               import tabTitle %}
  {% from "includes/case-card-list.html"          import caseCardList %}

  {% set filters = [{
    filterType: 'status',
    filterValues: ['Open']
  },{
    filterType: 'product',
    filterValues: ['Charge Worx, Travel plug adaptor']
  },{
    filterType: 'assignee',
    filterValues: [ data['c1-assigned'], data['c2-assigned'] ]
  }] %}


  {{ tabTitle({
        title:      'Related to this question'
  }) }}


  {{ caseCardList(filters, data['q1-assigned'], data['q2-assigned'], data['c1-assigned'], data['c2-assigned']) }}

{% endset -%}







{% set fullDetailHtml %}
  {% include "tab-sections/full-detail-question.html" %}
{% endset -%}




