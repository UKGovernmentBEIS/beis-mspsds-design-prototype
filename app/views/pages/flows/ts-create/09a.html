{% extends "includes/templates/flow--creation-ts.html" %}

{% set backLink      = './08' %}
{% set backText      = 'Back'  %}

{% set attachmentCount  = filesCount %}
{% if data['moreFiles'] == 'Yes' %}
  {% set attachmentCount  = attachmentCount - 1 %}
{% endif %}


{% set fileType               = data['new']['report']['file']['types'][attachmentCount] %}
{% set currentFileType        = data['new']['report']['files'][fileType] %}


{% set currentFileTypeCount   = 0 %}
{% if currentFileType %}
    {% for file, obj in currentFileType %}
        {% set currentFileTypeCount = currentFileTypeCount + 1%}
    {% endfor %}
{% endif %}



{% if data['new']['report']['type'] == 'Report' %}
  {% set titleType      = 'Report an unsafe or non-compliant product' %}
  {% set displayTitle   = fileType + ' details' %}
  {% set formAction     = './09' %}
{% endif %}


{% set currentUploadVar     = 'new[report][files][' +  fileType + '][f' +currentFileTypeCount+ ']' %}
{% set currentUploadIDVar   = 'new-report-files-' +  fileType + '-f' + currentFileTypeCount + '-' %}




{% block flow %}


    <form action="{{formAction}}" method="post" class="form">

      
      {% include "includes/components/shared/create/ts-attachment.html" %}


      <div class="govuk-grid-row govuk-!-margin-bottom-3 govuk-!-margin-top-3">
    
          <div class="mspsds-input govuk-grid-column-two-thirds  govuk-!-margin-bottom-5">

                {% call govukFieldset({
                  legend: {
                    text: "Are there other "+fileType+" to report",
                    isPageHeading: false,
                    classes: "govuk-fieldset__legend--m govuk-!-margin-bottom-1"
                  }
                }) %}
                    {{ govukRadios({
                      idPrefix:   "more-files",
                      name:       "moreFiles",
                      items: [
                        {
                          value: "Yes",
                          text: "Yes"
                        },
                        {
                          value: "No",
                          text: "No"
                        }
                      ]
                    }) }}
                {% endcall %}

          </div>

      </div>




      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          {% from "button/macro.njk" import govukButton %}
          {{ govukButton({
            text: "Continue"
          }) }}
        </div>
      </div>
    </form>


{% endblock %}
